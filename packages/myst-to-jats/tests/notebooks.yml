cases:
  - title: Notebook with code and outputs
    tree:
      type: root
      children:
        - type: block
          kind: notebook-code
          data:
            id: nb-cell-0
          identifier: nb-cell-0
          label: nb-cell-0
          html_id: nb-cell-0
          children:
            - type: code
              lang: python
              executable: true
              value: print('abc')
              identifier: nb-cell-0-code
              enumerator: 1
              html_id: nb-cell-0-code
            - type: outputs
              id: T7FMDqDm8dM2bOT1tKeeM
              identifier: nb-cell-0-outputs
              html_id: nb-cell-0-outputs
              children:
                - type: output
                  identifier: nb-cell-0-outputs-0
                  html_id: nb-cell-0-outputs-0
                  jupyter_data:
                    name: stdout
                    output_type: stream
                    text: abc\n...
                    hash: a
                    path: files/a.txt
        - type: block
          kind: notebook-code
          data:
            id: nb-cell-1
          identifier: nb-cell-1
          label: nb-cell-1
          html_id: nb-cell-1
          children:
            - type: code
              lang: python
              executable: true
              value: "'abc'"
              identifier: nb-cell-1-code
              enumerator: 2
              html_id: nb-cell-1-code
            - type: outputs
              id: uE4mPgSow0oyo0dvEH9Lc
              identifier: nb-cell-1-outputs
              html_id: nb-cell-1-outputs
              children:
                - type: output
                  identifier: nb-cell-1-outputs-0
                  html_id: nb-cell-1-outputs-0
                  jupyter_data:
                    output_type: execute_result
                    execution_count: 3
                    metadata: {}
                    data:
                      text/plain:
                        content_type: text/plain
                        hash: b
                        path: files/b.txt
                      text/html:
                        content_type: text/html
                        hash: b
                        path: files/b.html
        - type: block
          kind: notebook-code
          data:
            id: nb-cell-2
          identifier: nb-cell-2
          label: nb-cell-2
          html_id: nb-cell-2
          children:
            - type: code
              lang: python
              executable: true
              value: a
              identifier: nb-cell-2-code
              enumerator: 3
              html_id: nb-cell-2-code
            - type: outputs
              id: 7Qrwdo-_oq5US1Du2KCLU
              identifier: nb-cell-2-outputs
              html_id: nb-cell-2-outputs
              children:
                - type: output
                  identifier: nb-cell-2-outputs-0
                  html_id: nb-cell-2-outputs-0
                  jupyter_data:
                    ename: NameError
                    evalue: name 'a' is not defined
                    output_type: error
                    traceback: \u001b[0;31m------------------------------------------------------...
                    hash: c
                    path: files/c.txt
    jats: |-
      <?xml version="1.0" encoding="UTF-8"?>
      <!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD with MathML3 v1.3 20210610//EN" "http://jats.nlm.nih.gov/publishing/1.3/JATS-archivearticle1-3-mathml3.dtd">
      <article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ali="http://www.niso.org/schemas/ali/1.0/" dtd-version="1.3" xml:lang="en">
        <front>
          <article-meta/>
        </front>
        <body/>
        <sub-article>
          <front-stub>
            <article-version article-version-type="alt representation">notebook</article-version>
          </front-stub>
          <body>
            <sec id="sec-1" sec-type="notebook-code">
              <code id="nb-cell-0-code" language="python" executable="yes">print('abc')</code>
              <sec sec-type="notebook-output" id="nb-cell-0-outputs-0">
                <alternatives>
                  <media specific-use="stream" mimetype="text" mime-subtype="plain" xlink:href="files/a.txt"/>
                </alternatives>
              </sec>
            </sec>
            <sec id="sec-2" sec-type="notebook-code">
              <code id="nb-cell-1-code" language="python" executable="yes">'abc'</code>
              <sec sec-type="notebook-output" id="nb-cell-1-outputs-0">
                <alternatives>
                  <media specific-use="text" mimetype="text" mime-subtype="plain" xlink:href="files/b.txt"/>
                  <media specific-use="web" mimetype="text" mime-subtype="html" xlink:href="files/b.html"/>
                </alternatives>
              </sec>
            </sec>
            <sec id="sec-3" sec-type="notebook-code">
              <code id="nb-cell-2-code" language="python" executable="yes">a</code>
              <sec sec-type="notebook-output" id="nb-cell-2-outputs-0">
                <alternatives>
                  <media specific-use="error" mimetype="text" mime-subtype="plain" xlink:href="files/c.txt">
                    <caption>
                      <title>NameError</title>
                      <p>name 'a' is not defined</p>
                    </caption>
                  </media>
                </alternatives>
              </sec>
            </sec>
          </body>
        </sub-article>
      </article>
  - title: Notebook with content and code
    tree:
      type: root
      children:
        - type: block
          kind: notebook-code
          data:
            id: nb-cell-0
          identifier: nb-cell-0
          label: nb-cell-0
          html_id: nb-cell-0
          children:
            - type: code
              lang: python
              executable: true
              value: print('abc')
              identifier: nb-cell-0-code
              enumerator: 1
              html_id: nb-cell-0-code
            - type: outputs
              id: T7FMDqDm8dM2bOT1tKeeM
              identifier: nb-cell-0-outputs
              html_id: nb-cell-0-outputs
              children:
                - type: output
                  identifier: nb-cell-0-outputs-0
                  html_id: nb-cell-0-outputs-0
                  jupyter_data:
                    name: stdout
                    output_type: stream
                    text: abc\n...
                    hash: a
                    path: files/a.txt
        - type: block
          kind: notebook-content
          data:
            id: nb-cell-1
          identifier: nb-cell-1
          label: nb-cell-1
          html_id: nb-cell-1
          children:
            - type: heading
              identifier: sec1
              depth: 1
              children:
                - type: text
                  value: a section
            - type: paragraph
              children:
                - type: text
                  value: content
            - type: heading
              depth: 1
              children:
                - type: text
                  value: Another section
            - type: paragraph
              children:
                - type: text
                  value: section content!
    jats: |-
      <?xml version="1.0" encoding="UTF-8"?>
      <!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD with MathML3 v1.3 20210610//EN" "http://jats.nlm.nih.gov/publishing/1.3/JATS-archivearticle1-3-mathml3.dtd">
      <article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ali="http://www.niso.org/schemas/ali/1.0/" dtd-version="1.3" xml:lang="en">
        <front>
          <article-meta/>
        </front>
        <body>
          <sec id="sec-1">
            <title>a section</title>
            <p>content</p>
          </sec>
          <sec id="sec-2">
            <title>Another section</title>
            <p>section content!</p>
          </sec>
        </body>
        <sub-article>
          <front-stub>
            <article-version article-version-type="alt representation">notebook</article-version>
          </front-stub>
          <body>
            <sec id="sec-3" sec-type="notebook-code">
              <code id="nb-cell-0-code" language="python" executable="yes">print('abc')</code>
              <sec sec-type="notebook-output" id="nb-cell-0-outputs-0">
                <alternatives>
                  <media specific-use="stream" mimetype="text" mime-subtype="plain" xlink:href="files/a.txt"/>
                </alternatives>
              </sec>
            </sec>
            <sec id="sec-4" sec-type="notebook-content">
              <sec id="sec-5">
                <title>a section</title>
                <p>content</p>
              </sec>
              <sec id="sec-6">
                <title>Another section</title>
                <p>section content!</p>
              </sec>
            </sec>
          </body>
        </sub-article>
      </article>
  - title: Notebook with code with fig-cap
    tree:
      type: root
      children:
        - type: block
          kind: notebook-code
          data:
            id: nb-cell-0
            fig-cap: my caption
          identifier: nb-cell-0
          label: nb-cell-0
          html_id: nb-cell-0
          children:
            - type: code
              lang: python
              executable: true
              value: print('abc')
              identifier: nb-cell-0-code
              enumerator: 1
              html_id: nb-cell-0-code
            - type: outputs
              id: T7FMDqDm8dM2bOT1tKeeM
              identifier: nb-cell-0-outputs
              html_id: nb-cell-0-outputs
              children:
                - type: output
                  identifier: nb-cell-0-outputs-0
                  html_id: nb-cell-0-outputs-0

                  jupyter_data:
                    name: stdout
                    output_type: stream
                    text: abc\n...
                    hash: a
                    path: files/a.txt
    jats: |-
      <?xml version="1.0" encoding="UTF-8"?>
      <!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD with MathML3 v1.3 20210610//EN" "http://jats.nlm.nih.gov/publishing/1.3/JATS-archivearticle1-3-mathml3.dtd">
      <article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ali="http://www.niso.org/schemas/ali/1.0/" dtd-version="1.3" xml:lang="en">
        <front>
          <article-meta/>
        </front>
        <body>
          <sec id="sec-1" sec-type="notebook-code">
            <code id="nb-cell-0-code" language="python" executable="yes">print('abc')</code>
            <sec sec-type="notebook-output">
              <alternatives>
                <media specific-use="stream" mimetype="text" mime-subtype="plain" xlink:href="files/a.txt"/>
              </alternatives>
            </sec>
          </sec>
        </body>
        <sub-article>
          <front-stub>
            <article-version article-version-type="alt representation">notebook</article-version>
          </front-stub>
          <body>
            <sec id="sec-2" sec-type="notebook-code">
              <code id="nb-cell-0-code" language="python" executable="yes">print('abc')</code>
              <sec sec-type="notebook-output" id="nb-cell-0-outputs-0">
                <alternatives>
                  <media specific-use="stream" mimetype="text" mime-subtype="plain" xlink:href="files/a.txt"/>
                </alternatives>
              </sec>
            </sec>
          </body>
        </sub-article>
      </article>
  - title: Notebook with abstract
    tree:
      type: root
      children:
        - type: block
          kind: notebook-code
          data:
            id: nb-cell-0
          identifier: nb-cell-0
          label: nb-cell-0
          html_id: nb-cell-0
          children:
            - type: code
              lang: python
              executable: true
              value: print('abc')
              identifier: nb-cell-0-code
              enumerator: 1
              html_id: nb-cell-0-code
            - type: outputs
              id: T7FMDqDm8dM2bOT1tKeeM
              identifier: nb-cell-0-outputs
              html_id: nb-cell-0-outputs
              children:
                - type: output
                  identifier: nb-cell-0-outputs-0
                  html_id: nb-cell-0-outputs-0
                  jupyter_data:
                    name: stdout
                    output_type: stream
                    text: abc\n...
                    hash: a
                    path: files/a.txt
        - type: block
          data:
            part: abstract
          children:
            - type: paragraph
              children:
                - type: text
                  value: My abstract!
        - type: block
          kind: notebook-content
          data:
            id: nb-cell-1
          identifier: nb-cell-1
          label: nb-cell-1
          html_id: nb-cell-1
          children:
            - type: heading
              identifier: sec1
              depth: 1
              children:
                - type: text
                  value: a section
            - type: paragraph
              children:
                - type: text
                  value: content
    jats: |-
      <?xml version="1.0" encoding="UTF-8"?>
      <!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD with MathML3 v1.3 20210610//EN" "http://jats.nlm.nih.gov/publishing/1.3/JATS-archivearticle1-3-mathml3.dtd">
      <article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ali="http://www.niso.org/schemas/ali/1.0/" dtd-version="1.3" xml:lang="en">
        <front>
          <article-meta>
            <abstract>
              <p>My abstract!</p>
            </abstract>
          </article-meta>
        </front>
        <body>
          <sec id="sec-1">
            <title>a section</title>
            <p>content</p>
          </sec>
        </body>
        <sub-article>
          <front-stub>
            <article-version article-version-type="alt representation">notebook</article-version>
          </front-stub>
          <body>
            <sec id="sec-2" sec-type="notebook-code">
              <code id="nb-cell-0-code" language="python" executable="yes">print('abc')</code>
              <sec sec-type="notebook-output" id="nb-cell-0-outputs-0">
                <alternatives>
                  <media specific-use="stream" mimetype="text" mime-subtype="plain" xlink:href="files/a.txt"/>
                </alternatives>
              </sec>
            </sec>
            <sec id="sec-3">
              <p>My abstract!</p>
            </sec>
            <sec id="sec-4" sec-type="notebook-content">
              <sec id="sec-5">
                <title>a section</title>
                <p>content</p>
              </sec>
            </sec>
          </body>
        </sub-article>
      </article>

title: myst-to-typst span identifiers (targeting index directive)
cases:
  - title: span with identifier renders as Typst label
    mdast:
      type: root
      children:
        - type: paragraph
          children:
            - type: span
              identifier: span-id
              children:
                - type: text
                  value: Some text content
    typst: |-
      Some text content #label("span-id")
  
  - title: span without identifier renders normally
    mdast:
      type: root
      children:
        - type: paragraph
          children:
            - type: span
              children:
                - type: text
                  value: Plain span text
    typst: |-
      Plain span text
  
  - title: span with identifier in index directive does not render label (this is the case for show-index directive)
    mdast:
      type: root
      children:
        - type: block
          data:
            part: index
          children:
            - type: span
              identifier: index-span-id
              children:
                - type: text
                  value: Index entry
    typst: |-
      Index entry
    
  - title: span with identifier in heading renders both inline label and heading reference
    mdast:
      type: root
      children:
        - type: heading
          depth: 2
          identifier: heading-ref
          children:
            - type: text
              value: 'Text before '
            - type: span
              identifier: span-label
              children:
                - type: text
                  value: span content
            - type: text
              value: ' text after'
    typst: |-
      == Text before span content #label("span-label") text after <heading-ref>
  
  - title: multiple spans with identifiers
    mdast:
      type: root
      children:
        - type: paragraph
          children:
            - type: text
              value: 'First '
            - type: span
              identifier: span-one
              children:
                - type: text
                  value: labeled span
            - type: text
              value: ' and second '
            - type: span
              identifier: span-two
              children:
                - type: text
                  value: labeled span
    typst: |-
      First labeled span #label("span-one") and second labeled span #label("span-two")
  
  - title: span with identifier containing emphasis
    mdast:
      type: root
      children:
        - type: paragraph
          children:
            - type: span
              identifier: emph-span
              children:
                - type: emphasis
                  children:
                    - type: text
                      value: emphasized text
    typst: |-
      _emphasized text_ #label("emph-span")